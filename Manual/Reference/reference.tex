% =====================================================================
% HOL Manual LaTeX Source: reference manual
% =====================================================================

\documentclass[12pt,fleqn]{book}
%\usepackage{amsmath}
\usepackage{alltt}
\usepackage{../LaTeX/layout}
\usepackage{imakeidx}
\usepackage{alltt}
\usepackage{fancyvrb}
\usepackage{graphicx}

% ---------------------------------------------------------------------
% Read in defined macros and commands
% ---------------------------------------------------------------------
\input{../LaTeX/commands}
\input{../LaTeX/ref-macros}

\usepackage[hidelinks,hypertexnames=false,pdftitle={The HOL System REFERENCE}]{hyperref}
\usepackage{breakurl} % it depends on hyperref

%\includeonly{title,contents,preface,tactics,index}

\verbosereftrue                           % verbose typesetting
%\includeonly{theorems}
%\includeonly{rules}

\indexsetup{level=\chapter}
\makeindex
\input{ref-unicode}

\usepackage{titlesec}
\usepackage[english]{babel}
\usepackage{underscore}


\newcommand{\currentstruct}{}
\newcommand{\mysec}[1]{%
  \phantomsection%
  \makebox[\linewidth]{%
    \fbox{%
      \makebox[\dimexpr\linewidth-2\fboxsep][l]{\strut\hspace{0.4em}#1\hfill(\texttt{\currentstruct})\hspace{0.2em}}%
    }%
  }}
\titleformat{\section}{\normalfont\LARGE}{}{0pt}{\mysec}

% pandoc generates \tightlist command for itemizes that don't have blank
% lines between the items
\providecommand{\tightlist}{\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% pandoc's generated .tex file uses \section, \subsection etc, so this turns
% off numbering for them.
\setcounter{secnumdepth}{0}

% latex wants to use a "curly left single quote" when interpreting backtick `
% in verbatim environments; upquote stops this.  (Of course, many such uses
% should be replaced by the "modern" curly quotes that HOL also uses, but you
% certainly don't want to be confusing one for the other given how both are
% meaningful.
\usepackage{upquote}
\begin{document}

   \emergencystretch=14pt

   \setlength{\unitlength}{1mm}           % unit of length = 1mm
   \setlength{\baselineskip}{16pt}        % line spacing = 16pt

   % ---------------------------------------------------------------------
   % prelims
   % ---------------------------------------------------------------------

%   \pagenumbering{roman}                  % roman page numbers for prelims
%   \setcounter{page}{1}                   % start at page 1

   \include{title}                        % reference title page
   \include{preface}                      % preface to reference manual
   \input{../LaTeX/ack}                   % global acknowledgements
%   \tableofcontents                       % table of contents

   % ---------------------------------------------------------------------
   %
   % ---------------------------------------------------------------------

%   \cleardoublepage
%   \pagenumbering{arabic}                % arabic page numbers
%   \setcounter{page}{1}                  % start at page 1

   \include{entries-intro}
   \include{entries}                     % manual entries
   % \include{theorems}                    % pre-proved theorems

   {\def\#{\char'043}                    % \tt style `#' character
    \cleardoublepage
    \printindex
  }

\end{document}
