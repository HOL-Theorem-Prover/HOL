OPTIONS = QUIT_ON_FAILURE

all: $(TARGETS)
.PHONY: all

ifeq ($(KERNELID),otknl)
ARTS = bool_defs.ot.art \
  ../marker/marker.ot.art \
  ../combin/combin.ot.art \
  ../relation/relation.ot.art \
  ../coretypes/one.ot.art \
  ../coretypes/pair.ot.art \
  ../coretypes/poset.ot.art \
  ../coretypes/sum.ot.art \
  ../coretypes/option.ot.art \
  ../HolSat/sat.ot.art \
  ../metis/normalForms.ot.art \
  ../num/theories/num.ot.art \
  ../num/theories/prim_rec.ot.art \
  ../num/theories/arithmetic.ot.art \
  ../num/theories/numeral.ot.art \
  ../num/theories/basicSize.ot.art \
  ../num/theories/while.ot.art \
  ../num/extra_theories/numpair.ot.art \
  ../num/extra_theories/divides.ot.art \
  ../num/extra_theories/logroot.ot.art \
  ../num/extra_theories/gcd.ot.art \
  ../num/extra_theories/bit.ot.art \
  ../num/extra_theories/numeral_bit.ot.art \
  ../datatype/ind_type.ot.art \
  ../pred_set/src/pred_set.ot.art \
  ../list/src/list.ot.art \
  ../list/src/rich_list.ot.art \
  ../list/src/indexedLists.ot.art \
  ../list/src/numposrep.ot.art

hol4-base-unint.art: hol4-base-unint.thy $(ARTS)
	opentheory info --article -o $@ $<

base-theorems.art:
	opentheory info --theorems -o $@ base
	touch base-theorems.ui base-theorems.uo

hol4-assums.art: hol4-base-unsat.thy hol4-base-unint.art ../opentheory/hol4.int
	opentheory info --skip-definitions --assumptions -o $@ $<
	touch hol4-assums.ui hol4-assums.uo

prove_base_assums.art: prove_base_assums.otd base-theorems.art hol4-assums.art

hol4-base.art: hol4-base.thy hol4-base-unint.art ../opentheory/hol4.int \
               bool_defs.ot.art prove_base_assums.ot.art
	opentheory info --article -o $@ $<
	opentheory install --reinstall hol4-base.thy

all: hol4-base.art

endif
